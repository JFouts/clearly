@model TableDataViewModel

@if (Model == null)
{
    return;
}

<table class="table table-striped">
    <thead>
        <tr>
            @foreach (var column in @Model.Columns)
            {
                <th>@column.DisplayName</th>
            }
        </tr>
    </thead>
    <tbody>
        @foreach (var record in Model.Results) 
        {
            <tr>
                @foreach (var column in @Model.Columns)
                {
                    <td>
                        @{ var _ = record.TryGetValue(column.Key, out var value); }
                        @Html.DisplayFor(_ => value, column.DisplayTemplate, column.Key, column.Properties)
                    </td>
                }
            </tr>
        }
    </tbody>
</table>